(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{371:function(e,t,a){"use strict";a.r(t);var s=a(26),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"recipes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#recipes"}},[e._v("#")]),e._v(" Recipes")]),e._v(" "),a("h2",{attrs:{id:"adding-google-auth"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-google-auth"}},[e._v("#")]),e._v(" Adding Google Auth")]),e._v(" "),a("p",[e._v("This does uses [https://developers.google.com/identity/protocols/oauth2/web-server](Googles Web Applications using OAuth 2.0) API. Google has other auth settings for iOS and Android and of course API key, however these are not supported here.")]),e._v(" "),a("p",[e._v("Local host is used in this example.")]),e._v(" "),a("p",[e._v("HBP needs the following variables in docker-compose.yanl to work properly.")]),e._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[e._v("    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("GOOGLE_ENABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'true'")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("GOOGLE_CLIENT_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" YOURGOOGLECLIENTID.apps.googleusercontent.com\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("GOOGLE_CLIENT_SECRET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" YOURGOOGLECLIENTSECRET\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("REDIRECT_URL_SUCCESS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("3000/auth/login\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("REDIRECT_URL_FAILURE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("3000/auth/dang\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("This enables the /auth/providers/google route and stores variables.")]),e._v(" "),a("p",[e._v("Settings in a google account are needed as well. You will need a project in:")]),e._v(" "),a("p",[e._v("https://console.developers.google.com/apis/credentials")]),e._v(" "),a("p",[e._v("To create creds for the OAuth.")]),e._v(" "),a("p",[e._v("Click on Create Credentials ->  OAuth client ID -> Web Application")]),e._v(" "),a("p",[e._v("You can then get your Client ID and Client Secret.")]),e._v(" "),a("p",[e._v('And add to google account in "Authorized redirect URIs":')]),e._v(" "),a("p",[e._v("http://localhost:3000/auth/providers/google/callback")]),e._v(" "),a("p",[e._v("User sign in url, a get call to:")]),e._v(" "),a("p",[e._v("http://localhost:3000/auth/providers/google")]),e._v(" "),a("p",[e._v("Redirects to google sign in url:")]),e._v(" "),a("p",[e._v("https://accounts.google.com/o/oauth2/v2/auth/oauthchooseaccount")]),e._v(" "),a("p",[e._v("with url params indicating your google account info.")]),e._v(" "),a("p",[e._v("This will prompt user to choose google account and login to google.")]),e._v(" "),a("p",[e._v("Upon choosing an account and login success the user is sent back to the http://localhost:3000/auth/login redirect url you added to the google account adn in the docker-compose. These MUST match in the google account and in your docker-compose "),a("strong",[e._v("exactly")]),e._v(" or you will see an error.")]),e._v(" "),a("p",[e._v("The browser will now have a cookie from your domain with a refresh token. This dotken is also in the url string as a param. This can be exchanheaged for a jwt.")]),e._v(" "),a("h2",{attrs:{id:"native-mobile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#native-mobile"}},[e._v("#")]),e._v(" Native Mobile")]),e._v(" "),a("p",[e._v("There maybe a need to use HBP for a native mobile application. This oauth flow can still be used, however you wil need to open a browser and set up a page with redirect (js redirect not 3xx redirects) to a deep link back to your native application passing the token in the link. The refresh token can then be exchanged for a jwt via a GET call and stored on the native device.")]),e._v(" "),a("h2",{attrs:{id:"using-minio-on-a-docker-compose-stack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-minio-on-a-docker-compose-stack"}},[e._v("#")]),e._v(" Using Minio on a Docker Compose Stack")]),e._v(" "),a("h2",{attrs:{id:"adding-authentication-to-the-graphql-schema-using-hasura-actions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adding-authentication-to-the-graphql-schema-using-hasura-actions"}},[e._v("#")]),e._v(" Adding authentication to the GraphQL schema using Hasura Actions")])])}),[],!1,null,null,null);t.default=o.exports}}]);
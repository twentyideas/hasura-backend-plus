<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting started | Hasura Backend Plus Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/hasura-backend-plus/assets/css/0.styles.7c04d536.css" as="style"><link rel="preload" href="/hasura-backend-plus/assets/js/app.b1c2634a.js" as="script"><link rel="preload" href="/hasura-backend-plus/assets/js/2.131f0ea4.js" as="script"><link rel="preload" href="/hasura-backend-plus/assets/js/10.302cb04a.js" as="script"><link rel="prefetch" href="/hasura-backend-plus/assets/js/11.03f072bc.js"><link rel="prefetch" href="/hasura-backend-plus/assets/js/3.24d1278d.js"><link rel="prefetch" href="/hasura-backend-plus/assets/js/4.073e808e.js"><link rel="prefetch" href="/hasura-backend-plus/assets/js/5.e8c43c69.js"><link rel="prefetch" href="/hasura-backend-plus/assets/js/6.329cb0d9.js"><link rel="prefetch" href="/hasura-backend-plus/assets/js/7.34fb8953.js"><link rel="prefetch" href="/hasura-backend-plus/assets/js/8.405e6395.js"><link rel="prefetch" href="/hasura-backend-plus/assets/js/9.00664035.js">
    <link rel="stylesheet" href="/hasura-backend-plus/assets/css/0.styles.7c04d536.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hasura-backend-plus/" class="home-link router-link-active"><img src="logo.png" alt="Hasura Backend Plus Documentation" class="logo"> <span class="site-name can-hide">Hasura Backend Plus Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hasura-backend-plus/guide/" class="nav-link">
  Getting started
</a></div><div class="nav-item"><a href="/hasura-backend-plus/configuration/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/hasura-backend-plus/api/" class="nav-link">
  API
</a></div> <a href="https://github.com/nhost/hasura-backend-plus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hasura-backend-plus/guide/" class="nav-link">
  Getting started
</a></div><div class="nav-item"><a href="/hasura-backend-plus/configuration/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/hasura-backend-plus/api/" class="nav-link">
  API
</a></div> <a href="https://github.com/nhost/hasura-backend-plus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/hasura-backend-plus/guide.html" aria-current="page" class="active sidebar-link">Getting started</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#installation" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#nhost" class="sidebar-link">Nhost</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#docker-compose" class="sidebar-link">Docker-Compose</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#standalone" class="sidebar-link">Standalone</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#registration" class="sidebar-link">Registration</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#login" class="sidebar-link">Login</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#multi-factor-authentication" class="sidebar-link">Multi-Factor Authentication</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#generate" class="sidebar-link">Generate</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#enable" class="sidebar-link">Enable</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#login-2" class="sidebar-link">Login</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#disable" class="sidebar-link">Disable</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#jwt" class="sidebar-link">JWT</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#enable-an-oauth-provider" class="sidebar-link">Enable an OAuth provider</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#backend" class="sidebar-link">Backend</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#frontend" class="sidebar-link">Frontend</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#change-email" class="sidebar-link">Change email</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#reset-password" class="sidebar-link">Reset password</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#unregister" class="sidebar-link">Unregister</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/guide.html#logout" class="sidebar-link">Logout</a></li></ul></li><li><a href="/hasura-backend-plus/configuration.html" class="sidebar-link">Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#general" class="sidebar-link">General</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#connect-to-hasura" class="sidebar-link">Connect to Hasura</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#configure-jwt" class="sidebar-link">Configure JWT</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#migrations" class="sidebar-link">Migrations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#apply-migrations-for-a-new-installation" class="sidebar-link">Apply migrations for a new installation</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#migrating-from-hbp-v1" class="sidebar-link">Migrating from HBP v1</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#experimental" class="sidebar-link">Experimental</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#registration" class="sidebar-link">Registration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#activate-accounts" class="sidebar-link">Activate accounts</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#limit-email-domains" class="sidebar-link">Limit email domains</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#password-constraints" class="sidebar-link">Password constraints</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#additional-registration-fields" class="sidebar-link">Additional registration fields</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#authentication" class="sidebar-link">Authentication</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#oauth-providers" class="sidebar-link">OAuth Providers</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#two-factor-authentication" class="sidebar-link">Two-factor Authentication</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#enable-emails" class="sidebar-link">Enable emails</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#custom-configuration-files" class="sidebar-link">Custom configuration files</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#storage-rules" class="sidebar-link">Storage Rules</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#email-templates" class="sidebar-link">Email templates</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#private-key" class="sidebar-link">Private key</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#custom-user-schema" class="sidebar-link">Custom User Schema</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#rate-limiting" class="sidebar-link">Rate limiting</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#environment-variables" class="sidebar-link">Environment Variables</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#general-2" class="sidebar-link">General</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#authentication-2" class="sidebar-link">Authentication</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#providers" class="sidebar-link">Providers</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/configuration.html#storage" class="sidebar-link">Storage</a></li></ul></li></ul></li><li><a href="/hasura-backend-plus/api.html" class="sidebar-link">API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#authentication" class="sidebar-link">Authentication</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#registration" class="sidebar-link">Registration</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#login" class="sidebar-link">Login</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#logout" class="sidebar-link">Logout</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#jwk" class="sidebar-link">JWK</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#activate-account" class="sidebar-link">Activate account</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#delete-account" class="sidebar-link">Delete Account</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#change-password" class="sidebar-link">Change password</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#change-password-request" class="sidebar-link">Change Password Request</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#change-password-change" class="sidebar-link">Change Password Change</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#change-email" class="sidebar-link">Change Email</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#change-email-request" class="sidebar-link">Change Email Request</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#change-email-change" class="sidebar-link">Change Email Change</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#refresh-token" class="sidebar-link">Refresh token</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#revoke-refresh-token" class="sidebar-link">Revoke Refresh Token</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#generate-mfa-qr-code" class="sidebar-link">Generate MFA QR code</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#enable-mfa" class="sidebar-link">Enable MFA</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#disable-mfa" class="sidebar-link">Disable MFA</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#totp" class="sidebar-link">TOTP</a></li></ul></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#storage" class="sidebar-link">Storage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#file" class="sidebar-link">File</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#file-metadata" class="sidebar-link">File metadata</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#file-directory" class="sidebar-link">File directory</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#file-directory-metadata" class="sidebar-link">File directory metadata</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#upload-file" class="sidebar-link">Upload file</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#delete-file" class="sidebar-link">Delete file</a></li><li class="sidebar-sub-header"><a href="/hasura-backend-plus/api.html#health-check" class="sidebar-link">Health Check</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h1> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <h3 id="nhost"><a href="#nhost" class="header-anchor">#</a> Nhost</h3> <p>The easiest way to deploy HBP is with the official <a href="https://nhost.io" target="_blank" rel="noopener noreferrer">Nhost<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> managed service. Get your perfect configured backend with PostgreSQL, Hasura and Hasura Backend Plus and save yourself hours of maintenance per month.</p> <p>All <a href="https://nhost.io" target="_blank" rel="noopener noreferrer">Nhost<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> projects are built on open source software so you can make realtime web and mobile apps fast 🚀.</p> <div style="text-align:center;"><a href="https://nhost.io/register" target="_blank"><img src="https://github.com/nhost/hasura-backend-plus/raw/master/docs/.vuepress/public/nhost-register-button.png" width="200px"></a></div> <h3 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> Docker-Compose</h3> <p>Create the following <code>docker-compose.yaml</code> file, and modify the Hasura Admin Secret in both <code>graphql-engine</code> and <code>hasura-backend-plus</code> services.</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.6'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">postgres</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">12</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> postgrespassword
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db_data<span class="token punctuation">:</span>/var/lib/postgresql/data
  <span class="token key atrule">graphql-engine</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> hasura/graphql<span class="token punctuation">-</span>engine<span class="token punctuation">:</span>v1.2.1
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'8080:8080'</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'postgres'</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">HASURA_GRAPHQL_DATABASE_URL</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>//postgres<span class="token punctuation">:</span>postgrespassword@postgres<span class="token punctuation">:</span>5432/postgres
      <span class="token key atrule">HASURA_GRAPHQL_ADMIN_SECRET</span><span class="token punctuation">:</span> <span class="token string">'$HASURA_GRAPHQL_ADMIN_SECRET'</span>
      <span class="token key atrule">HASURA_GRAPHQL_JWT_SECRET</span><span class="token punctuation">:</span> <span class="token string">'{&quot;type&quot;: &quot;RS256&quot;, &quot;jwk_url&quot;: &quot;http://hasura-backend-plus:3000/auth/jwks&quot;}'</span>
      <span class="token key atrule">HASURA_GRAPHQL_ENABLE_CONSOLE</span><span class="token punctuation">:</span> <span class="token string">'true'</span>
  <span class="token key atrule">hasura-backend-plus</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nhost/hasura<span class="token punctuation">-</span>backend<span class="token punctuation">-</span>plus<span class="token punctuation">:</span>latest
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'3000:3000'</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">SERVER_URL</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">3000</span>
      <span class="token key atrule">HASURA_ENDPOINT</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//graphql<span class="token punctuation">-</span>engine<span class="token punctuation">:</span>8080/v1/graphql
      <span class="token key atrule">HASURA_GRAPHQL_ADMIN_SECRET</span><span class="token punctuation">:</span> <span class="token string">'$HASURA_GRAPHQL_ADMIN_SECRET'</span>
      <span class="token key atrule">JWT_ALGORITHM</span><span class="token punctuation">:</span> RS256
      <span class="token key atrule">S3_ENDPOINT</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//minio<span class="token punctuation">:</span><span class="token number">9000</span>
      <span class="token key atrule">S3_BUCKET</span><span class="token punctuation">:</span> hasura<span class="token punctuation">-</span>backend<span class="token punctuation">-</span>plus
      <span class="token key atrule">S3_ACCESS_KEY_ID</span><span class="token punctuation">:</span> minio_access_key
      <span class="token key atrule">S3_SECRET_ACCESS_KEY</span><span class="token punctuation">:</span> <span class="token string">'${S3_SECRET_ACCESS_KEY:?S3_SECRET_ACCESS_KEY}'</span>
      <span class="token key atrule">AUTO_MIGRATE</span><span class="token punctuation">:</span> <span class="token string">'true'</span>
  <span class="token key atrule">minio</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> minio/minio
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">S3_BUCKET</span><span class="token punctuation">:</span> hasura<span class="token punctuation">-</span>backend<span class="token punctuation">-</span>plus
      <span class="token key atrule">MINIO_ACCESS_KEY</span><span class="token punctuation">:</span> minio_access_key
      <span class="token key atrule">MINIO_SECRET_KEY</span><span class="token punctuation">:</span> <span class="token string">'${S3_SECRET_ACCESS_KEY:?S3_SECRET_ACCESS_KEY}'</span> <span class="token comment">## min 8 character</span>
    <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> sh
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">&quot;-c 'mkdir -p /export/hasura-backend-plus &amp;&amp; /usr/bin/minio server /export'&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'minio_data:/data'</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">db_data</span><span class="token punctuation">:</span>
  <span class="token key atrule">minio_data</span><span class="token punctuation">:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>Then start the services:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">HASURA_GRAPHQL_ADMIN_SECRET</span><span class="token operator">=</span><span class="token operator">&lt;</span>your Hasura Admin secret<span class="token operator">&gt;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">S3_SECRET_ACCESS_KEY</span><span class="token operator">=</span><span class="token operator">&lt;</span>your Minio access key<span class="token operator">&gt;</span>
docker-compose up -d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Everything should be up and running. HBP is listening to <code>http://localhost:3000</code>, Hasura Graphql Engine is listening to <code>http://localhost:8080</code>.</p> <p>You can then run the Hasura Console in following the <a href="https://hasura.io/docs/1.0/graphql/manual/hasura-cli/hasura_console.html" target="_blank" rel="noopener noreferrer">official instructions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="standalone"><a href="#standalone" class="header-anchor">#</a> Standalone</h3> <p>You can also install HBP without any other service, and connect it to an existing Hasura server, and/or an S3 instance if you plan to use the storage features.
The easiest way is to pull and run a Docker container, but you can also run the service from the source code.</p> <p>You will also need to make sure the HBP migrations and metadata are loaded in your Hasura instance, either in using the <code>AUTO_MIGRATE=true</code> environment variable, or in loading the migrations manually. Please see the <a href="/hasura-backend-plus/configuration.html#migrations">related configuration chapter</a> for further details.</p> <h4 id="using-docker"><a href="#using-docker" class="header-anchor">#</a> Using Docker</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -d -p <span class="token number">3000</span>:3000 <span class="token punctuation">\</span>
  -e <span class="token string">&quot;HASURA_ENDPOINT=&lt;your Hasura graphql endpoint&gt;&quot;</span> <span class="token punctuation">\</span>
  -e <span class="token string">&quot;HASURA_GRAPHQL_ADMIN_SECRET=&lt;your Hasura admin secret&gt;&quot;</span> <span class="token punctuation">\</span>
  -e <span class="token string">&quot;JWT_KEY=&lt;your JWT RSA256 key&gt;&quot;</span> <span class="token punctuation">\</span>
  nhost/hasura-backend-plus:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div> <h4 id="from-the-source-code"><a href="#from-the-source-code" class="header-anchor">#</a> From the source code</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">git</span> clone https://github.com/nhost/hasura-backend-plus.git
<span class="token builtin class-name">cd</span> hasura-backend-plus
<span class="token function">yarn</span>
<span class="token function">cp</span> .env.example .env
<span class="token function">yarn</span> build
<span class="token function">yarn</span> start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="registration"><a href="#registration" class="header-anchor">#</a> Registration</h2> <p>By default, anyone can register with an email address and a password:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -d <span class="token string">'{&quot;email&quot;:&quot;real@emailadress.com&quot;, &quot;password&quot;:&quot;StrongPasswordNot1234&quot;}'</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> -X POST http://localhost:3000/auth/register`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You can add some safeguards and limitations to the registration process like email verification, constraints on emails and passwords, or setting additional registration fields from your custom database schema. More information is available in the <a href="/hasura-backend-plus/configuration.html#registration">registration configuration chapter</a>.</p> <h2 id="login"><a href="#login" class="header-anchor">#</a> Login</h2> <p>Once an user is registered, they can connect to HBP with the <code>/auth/login</code> endpoint:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -d <span class="token string">'{&quot;email&quot;:&quot;real@emailadress.com&quot;, &quot;password&quot;:&quot;StrongPasswordNot1234&quot;}'</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> -X POST http://localhost:3000/auth/login`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It will return the following payload:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;jwt_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the user Hasura-compatible JWT&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;jwt_expires_in&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the number of milliseconds of validity of the JWT&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>You'll find more details about how HBP handles the session and JWT in the <a href="#jwt">JWT section</a>.</p> <h2 id="multi-factor-authentication"><a href="#multi-factor-authentication" class="header-anchor">#</a> Multi-Factor Authentication</h2> <p>By default, any authenticted user can decide to add <a href="https://en.wikipedia.org/wiki/Time-based_One-time_Password_algorithm" target="_blank" rel="noopener noreferrer">TOTP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> multi-factor authentication (MFA). It will require the user to get a generator such as <a href="https://authy.com/" target="_blank" rel="noopener noreferrer">Authy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&amp;hl=en" target="_blank" rel="noopener noreferrer">Google Authenticator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="generate"><a href="#generate" class="header-anchor">#</a> Generate</h3> <p>The first step to activate MFA is to generate a secret through the <code>/auth/mfa/generate</code> POST endpoint:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> -X POST http://localhost:3000/auth/mfa/generate`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It will return the following payload:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;otp_secret&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the otp secret&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;image_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the base64-encoded QR Code png image&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The client now goes to its favorite MFA app (e.g. Google Authenticator) and enters its secret either manually or in using the QR-code generated by the server.</p> <h3 id="enable"><a href="#enable" class="header-anchor">#</a> Enable</h3> <p>Once the user fetched their OTP secret, they must generate a verification code and send it to HBP to complete the activation or MFA. The code is send to the <code>/auth/mfa/enable</code> POST endpoint:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -d <span class="token string">'{&quot;code&quot;:&quot;&lt;verification-code&gt;&quot;}'</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> -X POST http://localhost:3000/auth/mfa/enable`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The server should return a <code>204</code> HTTP code. The user login will now have an additional step as explained in the following section.</p> <h3 id="login-2"><a href="#login-2" class="header-anchor">#</a> Login</h3> <p>When an user enabled MFA, they still send their user/email credentials to <code>/auth/login</code>, but the payload will now become:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mfa&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ticket&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;an automatically one-time only generated ticket&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The next step to finish the authentication is to send back the ticket with the verification code from your favorite MFA app to <code>/auth/mfa/totp</code>:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -d <span class="token string">'{&quot;ticket&quot;:&quot;&lt;generated-ticket&gt;&quot;, code&quot;:&quot;&lt;verification-code&gt;&quot;}'</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> -X POST http://localhost:3000/auth/mfa/totp`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The HBP session is then opened with the client, and the JWT is sent back as the payload:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;jwt_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the user Hasura-compatible JWT&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;jwt_expires_in&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the number of milliseconds of validity of the JWT&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="disable"><a href="#disable" class="header-anchor">#</a> Disable</h3> <h2 id="jwt"><a href="#jwt" class="header-anchor">#</a> JWT</h2> <p>When the user logs in, HBP sets an HTTP-Only cookie to store session information and a refresh token.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Never store a JWT in the local storage of the browser as it is prone to XSS attacks! Keep a short expiration period instead, and get a refreshed JWT through HBP.</p></div> <p>The <code>jwt_expires_in</code> indicates the maximum frequency in which the browser will need to refresh the JWT.</p> <p>You can get a refreshed JWT throught the <code>/auth/token/refresh</code> GET endpoint:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> -H <span class="token string">&quot;Content-Type: application/json&quot;</span> http://localhost:3000/auth/token/refresh`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It will return the same kind of payload as in <code>/auth/login</code>, with a new JWT:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;jwt_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the user Hasura-compatible JWT&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;jwt_expires_in&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;the number of milliseconds of validity of the JWT&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="enable-an-oauth-provider"><a href="#enable-an-oauth-provider" class="header-anchor">#</a> Enable an OAuth provider</h2> <h3 id="backend"><a href="#backend" class="header-anchor">#</a> Backend</h3> <p>Set the necessary environment variables on <code>docker-compose.yaml</code> under the <code>hasura-backend-plus</code> section. The OAuth Providers section from <code>.env.example</code> has a list of the supported providers and options. Make sure to set also the <code>PROVIDER_SUCCESS_REDIRECT</code> and <code>PROVIDER_FAILURE_REDIRECT</code> URLs to the frontend.</p> <p>Client ID and a client secret are required to create a route for the following providers:</p> <ul><li>google</li> <li>facebook</li> <li>github</li> <li>linkedin</li> <li>windowslive</li></ul> <p>Twitter requires consumerKey, consumerSecret, and cookieSecret
Apple requires client ID, client secret, key, and key ID</p> <p>If these are not provided the provider route will not be created.</p> <h3 id="frontend"><a href="#frontend" class="header-anchor">#</a> Frontend</h3> <p>For OAuth login, redirect the user to <code>//hasura-backend-plus/auth/providers/{provider}</code> to perform the authentication. Upon success, the URL set in <code>PROVIDER_SUCCESS_REDIRECT</code> will be called back, with a <code>refresh_token</code> query parameter. Use this value to perform a GET on <code>//hasura-backend-plus/auth/token/refresh?refresh_token={refresh_token}</code> to obtain the response which contains the valid JWT.</p> <p>Google set up example in recipies.md</p> <h2 id="change-email"><a href="#change-email" class="header-anchor">#</a> Change email</h2> <h2 id="reset-password"><a href="#reset-password" class="header-anchor">#</a> Reset password</h2> <h2 id="unregister"><a href="#unregister" class="header-anchor">#</a> Unregister</h2> <h2 id="logout"><a href="#logout" class="header-anchor">#</a> Logout</h2></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nhost/hasura-backend-plus/edit/master/guide.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/25/2021, 9:42:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/hasura-backend-plus/configuration.html">
        Configuration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/hasura-backend-plus/assets/js/app.b1c2634a.js" defer></script><script src="/hasura-backend-plus/assets/js/2.131f0ea4.js" defer></script><script src="/hasura-backend-plus/assets/js/10.302cb04a.js" defer></script>
  </body>
</html>
